<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.Spring_Project.mapper.QnAMapper">

    <insert id="insertQuestion" parameterType="hashMap">
        insert
        into
        question
        values(
        q_seq.nextval,
        #{id},
        #{pd_seq},
        #{content},
        'Y',
        sysdate,
        'N'
        )
    </insert>

    <select id="getQuestions" resultType="com.example.Spring_Project.dto.QuestionDTO">
        select
            q_seq,
            id,
            pd_seq,
            content,
            status,
        to_char(writeDate,'YYYY-MM-DD HH:MI') AS writeDate
        from
        question
        where status = 'Y' and pd_seq = #{pd_seq}
        order by writeDate desc
    </select>

    <select id="getAnswer" resultType="com.example.Spring_Project.dto.AnswerDTO">
        select
            writer,
            answer,
            to_char(writeDate,'YYYY-MM-DD HH:MI') AS writeDate
        from answer
        where q_seq = #{q_seq}
    </select>

    <select id="getMyQnAs" resultType="com.example.Spring_Project.dto.QuestionDTO">
        select
            q_seq,
            id,
            pd_seq,
            content,
            status,
            to_char(writeDate,'YYYY-MM-DD HH:MI') AS writeDate
        from question
        where status = 'Y'
    </select>

    <select id="getQuestion" resultType="com.example.Spring_Project.dto.QuestionDTO">
        select
          q_seq,
          pd_seq,
          content,
          writeDate
        from question
        where q_seq = #{q_seq}
    </select>

    <update id="updQuestion" parameterType="hashMap">
        update question
            set content = #{content}
        where q_seq = #{q_seq}
    </update>

    <select id="qNaList" resultType="com.example.Spring_Project.dto.QuestionDTO">
        select
            q_seq,
            id,
            pd_seq,
            content,
            status,
        to_char(writeDate,'YYYY-MM-DD HH:MI') AS writeDate
        from question
        where status = 'Y'
    </select>

    <insert id="insertAns" parameterType="hashMap">
        insert
         into answer
        values(
            ans_seq.nextval,
            #{q_seq},
            #{id},
            #{answer},
            sysdate,
            'Y',
            'Y'
        )
    </insert>

    <update id="updAns" parameterType="HashMap">
        update
         answer
        set answer = #{content}
        where q_seq = #{q_seq}
    </update>
</mapper>